var GIZA=GIZA||{REVISION:"0"};GIZA.init=function(t,e){GIZA.saveGizaContext&&GIZA.saveGizaContext(),window.requestAnimationFrame=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame,t=t||GIZA.startCanvas||document.getElementsByTagName("canvas")[0];var n=window.devicePixelRatio||1,r=t.clientWidth,i=t.clientHeight,a=r/i;t.width=r*n,t.height=i*n,e=e||{preserveDrawingBuffer:!1,antialias:!0};var o=GIZA.createContext(t,e);if(!o){var s=document.createElement("p");return s.classList.add("error"),s.innerHTML="Alas, your browser does not support WebGL.",t.parentNode.replaceChild(s,t),null}GIZA.context=o,GIZA.pixelScale=n,GIZA.canvas=t,GIZA.aspect=a,GIZA.timeOffset=0;var u=["context","canvas","aspect","drawHooks","animation","paused","timeOffset","pauseTime","mouse"];return GIZA.currentGizaContext=GIZA.extract(GIZA,u),GIZA.saveGizaContext=function(){GIZA.currentGizaContext&&GIZA.merge(GIZA.currentGizaContext,GIZA,u)},GIZA.setGizaContext=function(t){GIZA.saveGizaContext(),GIZA.currentGizaContext=t,GIZA.merge(GIZA,t)},GIZA.gizaContexts=GIZA.gizaContexts||[],GIZA.gizaContexts.push(GIZA.currentGizaContext),window.onresize=function(){GIZA.refreshSize();for(var t=0;t<GIZA.gizaContexts.length;t++)GIZA.refreshSize(GIZA.gizaContexts[t])},GIZA.mouseinit(),o},GIZA.refreshSize=function(t){t=t||GIZA;var e=t.canvas.clientWidth,n=t.canvas.clientHeight;t.aspect=e/n,t.canvas.width=e*GIZA.pixelScale,t.canvas.height=n*GIZA.pixelScale},GIZA.createContext=function(t,e){for(var n=null,r="webgl experimental-webgl webkit-3d moz-webgl".split(" "),i=0;i<r.length&&!n;i++)try{n=t.getContext(r[i],e)}catch(a){}return n};var GIZA=GIZA||{};GIZA.flatten=function(t){var e,n,r,i;for(n=[],r=0,i=t.length;i>r;r++)e=t[r],e instanceof Array?n=n.concat(GIZA.flatten(e)):n.push(e);return n},GIZA.flattenTo=function(t,e,n){n=n||0;for(var r=0;r<t.length;r++)for(var i=0;i<t[r].length;i++)e[n++]=t[r][i];return n},GIZA.format=function(t,e){return t.replace(/{([^{}]*)}/g,function(t,n){var r=e[n];return"string"==typeof r||"number"==typeof r?r:t})},GIZA.merge=function(t,e,n){if(n){for(var r=0;r<n.length;r++){var i=n[r];t[i]=e[i]}return t}for(var a in e)t[a]=e[a];return t},GIZA.clone=function(t){var e=function(t){return t===Object(t)};return e(t)?Array.isArray(t)?t.slice():GIZA.merge({},t):t},GIZA.extract=function(t,e){for(var n={},r=0;r<e.length;r++){var i=e[r];n[i]=t[i]}return n},GIZA.joinBuffers=function(t,e){e=e||t[0].constructor;for(var n=t.reduce(function(t,e){return t+e.length},0),r=new e(n),i=0,a=0;a<t.length;a++)r.set(t[a],i),i+=t[a].length;return r},GIZA.interleaveBuffers=function(t,e){for(var n=null,r=t.reduce(function(t,r){var i=r.byteLength/e;return i!=Math.floor(i)?(console.error("interleaveBuffers has a badly-sized input: "+r.length+" / "+e),void 0):null!=n&&i!=n?(console.error("interleaveBuffers has inconsistent inputs: "+n+", "+i),void 0):(n=i,t+r.byteLength)},0),i=new ArrayBuffer(r),a=new Uint8Array(i),o=0,s=0,u=0;n>u;u++)t.forEach(function(t){var n=new Uint8Array(t,s,e);a.set(n,o),o+=e}),s+=e;return i},GIZA.download=function(t,e,n){var r=new XMLHttpRequest;if(r.open("GET",t,!0),"json"==n)var i=function(){r.responseText&&e(JSON.parse(r.responseText))};else{r.responseType="arraybuffer";var i=function(){r.response&&e(r.response)}}r.onload=i,r.send(null)},GIZA.grabCanvas=function(){var t=GIZA.canvas.toDataURL("image/png");return window.open(t,"_blank"),window.focus(),t};var GIZA=GIZA||{};GIZA.drawHooks=[],GIZA.animate=function(t){GIZA.animation=t;var e=GIZA.currentGizaContext,n=function(t){if(GIZA.setGizaContext(e),!GIZA.paused){var r=GIZA.context;r.getError(),t+=GIZA.timeOffset;for(var i=0;i<GIZA.drawHooks.length;i++)GIZA.drawHooks[i](t);r.viewport(0,0,GIZA.canvas.width,GIZA.canvas.height),GIZA.animation(t),err=r.getError(),err==r.NO_ERROR?window.requestAnimationFrame(n,GIZA.canvas):console.error("WebGL error during draw cycle: ",err)}};n(GIZA.getTime())},GIZA.pause=function(){GIZA.paused=!0,GIZA.pauseTime=GIZA.getTime()},GIZA.resume=function(){if(GIZA.paused){var t=GIZA.getTime(),e=t-GIZA.pauseTime;GIZA.timeOffset-=e,GIZA.paused=!1,GIZA.animate(GIZA.animation)}},GIZA.restart=function(){var t=GIZA.getTime()-GIZA.timeOffset;GIZA.timeOffset=-t,GIZA.pauseTime=0},GIZA.getTime=function(){var t;return t="mozAnimationStartTime"in window?window.mozAnimationStartTime:window.performance&&"now"in window.performance?window.performance.now():Date.now(),t+GIZA.timeOffset};var GIZA=GIZA||{};GIZA.compile=function(t,e){var n={};for(var r in t){var i=t[r];if("object"==typeof i)n[r]=GIZA.compileProgram(i.vs,i.fs,i.attribs||e);else{var t=uberspec[key].split(" "),a=[t[0]],o=[t[1]];spec[key]={vs:a,fs:o,attribs:e}}}return n},GIZA.compileProgram=function(t,e,n){var r=GIZA.context,i=GIZA.compileShader(t,r.VERTEX_SHADER),a=GIZA.compileShader(e,r.FRAGMENT_SHADER),o=r.createProgram();r.attachShader(o,i),r.attachShader(o,a);for(key in n)value=n[key],r.bindAttribLocation(o,value,key);r.linkProgram(o);var s=r.getProgramParameter(o,r.LINK_STATUS);s||console.error("Could not link "+t+" with "+e);for(var u=r.getProgramParameter(o,r.ACTIVE_UNIFORMS),c=0;u>c;c++){var l=r.getActiveUniform(o,c).name;o[l]=r.getUniformLocation(o,l)}return o},GIZA.compileShader=function(t,e){for(var n=GIZA.context,r="",i=0;i<t.length;i++){var a=document.getElementById(t[i]);a?r+=a.innerHTML:console.error("Cannot find shader string named "+t[i])}var o=n.createShader(e);n.shaderSource(o,r),n.compileShader(o);var s=n.getShaderParameter(o,n.COMPILE_STATUS);return s||console.error("GLSL error in "+t+":\n"+n.getShaderInfoLog(o)),o};var GIZA=GIZA||{};GIZA.BufferView=function(t){if(!(this instanceof GIZA.BufferView))return new GIZA.BufferView(t);this.offsets={},this.dims={};var e=0;for(var n in t){var r=t[n][0],i=t[n][1],a=i*r.BYTES_PER_ELEMENT;this.offsets[n]=e,this.dims[n]=i,e+=a}this.elementSize=e,this.strides={};for(var n in t){var r=t[n][0],o=this.elementSize/r.BYTES_PER_ELEMENT;o!=Math.floor(o)&&console.error("BufferView alignment error: '"+n+"' is "+r.BYTES_PER_ELEMENT+" bytes but element size is "+this.elementSize+" bytes."),this.strides[n]=o}this.setArray=function(e){this.numElements=e.byteLength/this.elementSize,this.typedArrays={};for(var n in t){var r=t[n][0];this.typedArrays[n]=new r(e,this.offsets[n])}},this.makeBuffer=function(t){var e=new ArrayBuffer(t*this.elementSize);return this.setArray(e),e},this.iterator=function(t){var e=this;return{index:0,clone:function(){var n=e.iterator(t);return n.index=this.index,n},next:function(){if(this.index>=e.numElements)return null;var n=e.getElement(this.index++);return t?n[t]:n}}},this.getElement=function(e){retval={};for(var n in t){var r=e*this.strides[n];retval[n]=this.typedArrays[n].subarray(r,r+this.dims[n])}return retval.set=function(e){for(var n in e)if(n in t){var r=e[n];Array.isArray(r)?retval[n].set(r):retval[n][0]=r}},retval}};var GIZA=GIZA||{};GIZA.Vector2={make:function(t,e){return[t,e]},direction:function(t,e){return this.normalized(this.subtract(e,t))},equivalent:function(t,e,n){return n=n||1e-6,this.distanceSquared(t,e)<n},copy:function(t){return this.make(t[0],t[1])},set:function(t,e){return t[0]=e[0],t[1]=e[1],t},normalize:function(t){var e=1/this.length(t);return this.scale(t,e)},normalized:function(t){var e=1/this.length(t);return this.scaled(t,e)},translate:function(t,e,n){return n?(t[0]+=e,t[1]+=n):(t[0]+=e[0],t[1]+=e[1]),t},translated:function(t,e,n){var r=this.make();return n?(r[0]=t[0]+e,r[1]=t[1]+n):(r[0]=t[0]+e[0],r[1]=t[1]+e[1]),r},scale:function(t,e){return t[0]*=e,t[1]*=e,t},scaled:function(t,e){return this.make(e*t[0],e*t[1])},negate:function(t){return this.scale(t,-1)},negated:function(t){return this.scaled(t,-1)},length:function(t){return Math.sqrt(this.dot(t,t))},lengthSquared:function(t){return this.dot(t,t)},distance:function(t,e){var n=this.subtract(t,e);return this.length(n)},distanceSquared:function(t,e){var n=this.subtract(t,e);return this.lengthSquared(n)},cross:function(t,e){return t[0]*e[1]-t[1]*e[0]},withinTriangle:function(t,e,n,r){var i=this.subtract(n,e),a=this.subtract(r,n),o=this.subtract(e,r),s=this.subtract(t,e),u=this.subtract(t,n),c=this.subtract(t,r),e=this.cross(i,s),n=this.cross(a,u),r=this.cross(o,c);return 0>e&&0>n&&0>r?!0:e>0&&n>0&&r>0?!0:!1},subtract:function(t,e){return this.make(t[0]-e[0],t[1]-e[1])},add:function(t,e){return this.make(t[0]+e[0],t[1]+e[1])},dot:function(t,e){return t[0]*e[0]+t[1]*e[1]},lerp:function(t,e,n){return t=this.scaled(t,1-n),e=this.scaled(e,n),this.add(t,e)},perp:function(t){return this.make(-t[1],t[0])}},GIZA.Vector3={make:function(t,e,n){return[t,e,n]},direction:function(t,e){return this.normalized(this.subtract(e,t))},equivalent:function(t,e,n){return n=n||1e-6,this.distanceSquared(t,e)<n},copy:function(t){return this.make(t[0],t[1],t[2])},set:function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t},normalize:function(t){var e=1/this.length(t);return this.scale(t,e)},normalized:function(t){var e=1/this.length(t);return this.scaled(t,e)},translate:function(t,e,n,r){return n?(t[0]+=e,t[1]+=n,t[2]+=r):(t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]),t},translated:function(t,e,n,r){var i=this.make();return n?(i[0]=t[0]+e,i[1]=t[1]+n,i[2]=t[2]+r):(i[0]=t[0]+e[0],i[1]=t[1]+e[1],i[2]=t[2]+e[2]),i},scale:function(t,e){return t[0]*=e,t[1]*=e,t[2]*=e,t},scaled:function(t,e){return this.make(e*t[0],e*t[1],e*t[2])},negate:function(t){return this.scale(t,-1)},negated:function(t){return this.scaled(t,-1)},length:function(t){return Math.sqrt(this.dot(t,t))},lengthSquared:function(t){return this.dot(t,t)},distance:function(t,e){var n=this.subtract(t,e);return this.length(n)},distanceSquared:function(t,e){var n=this.subtract(t,e);return this.lengthSquared(n)},cross:function(t,e){return this.make(t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0])},subtract:function(t,e){return this.make(t[0]-e[0],t[1]-e[1],t[2]-e[2])},add:function(t,e){return this.make(t[0]+e[0],t[1]+e[1],t[2]+e[2])},dot:function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]},lerp:function(t,e,n){return t=this.scaled(t,1-n),e=this.scaled(e,n),this.add(t,e)},perp:function(t){var e=this.cross(t,this.make(1,0,0));return this.lengthSquared(e)<.01&&(e=this.cross(t,this.make(0,1,0))),this.normalize(e)}},GIZA.Vector4={make:function(t,e,n,r){return[t,e,n,r]},equivalent:function(t,e,n){return n=n||1e-6,this.distanceSquared(t,e)<n},copy:function(t){return this.make(t[0],t[1],t[2],t[3])},set:function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t},normalize:function(t){var e=1/this.length(t);return this.scale(t,e)},normalized:function(t){var e=1/this.length(t);return this.scaled(t,e)},translate:function(t,e,n,r,i){return n?(t[0]+=e,t[1]+=n,t[2]+=r,t[3]+=i):(t[0]+=e[0],t[1]+=e[1],t[2]+=e[2],t[3]+=e[3]),t},translated:function(t,e,n,r,i){var a=this.make();return n?(a[0]=t[0]+e,a[1]=t[1]+n,a[2]=t[2]+r,a[3]=t[3]+i):(a[0]=t[0]+e[0],a[1]=t[1]+e[1],a[2]=t[2]+e[2],a[3]=t[3]+e[3]),a},scale:function(t,e){return t[0]*=e,t[1]*=e,t[2]*=e,t[3]*=e,t},scaled:function(t,e){return this.make(e*t[0],e*t[1],e*t[2],e*t[3])},negate:function(t){return this.scale(t,-1)},negated:function(t){return this.scaled(t,-1)},length:function(t){return Math.sqrt(this.dot(t,t))},lengthSquared:function(t){return this.dot(t,t)},distance:function(t,e){var n=this.subtract(t,e);return this.length(n)},distanceSquared:function(t,e){var n=this.subtract(t,e);return this.lengthSquared(n)},subtract:function(t,e){return this.make(t[0]-e[0],t[1]-e[1],t[2]-e[2],t[3]-e[3])},add:function(t,e){return this.make(t[0]+e[0],t[1]+e[1],t[2]+e[2],t[3]+e[3])},dot:function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]},lerp:function(t,e,n){return t=this.scaled(t,1-n),e=this.scaled(e,n),this.add(t,e)}};var GIZA=GIZA||{};GIZA.Matrix4={make:function(){if(0==arguments.length)return self.identity();if(4==arguments.length){var t=arguments;return this.make(t[0][0],t[0][1],t[0][2],t[0][3],t[1][0],t[1][1],t[1][2],t[1][3],t[2][0],t[2][1],t[2][2],t[2][3],t[3][0],t[3][1],t[3][2],t[3][3])}if(16==arguments.length)return Array.prototype.slice.call(arguments);if(1==arguments.length){var t=arguments[0];if(16==t.length)return t.slice(0);if(4==t.length)return this.make(t[0][0],t[0][1],t[0][2],t[0][3],t[1][0],t[1][1],t[1][2],t[1][3],t[2][0],t[2][1],t[2][2],t[2][3],t[3][0],t[3][1],t[3][2],t[3][3]);if(9==t.length)return this.make(t[0],t[1],t[2],0,t[3],t[4],t[5],0,t[6],t[7],t[8],0,0,0,0,1)}else console.error("GIZA.Matrix4 has wrong number of arguments")},makeBasis:function(t,e,n){return this.make(t[0],t[1],t[2],0,e[0],e[1],e[2],0,n[0],n[1],n[2],0,0,0,0,1)},copy:function(t){return this.make(t)},identity:function(){return this.make(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)},equivalent:function(t,e,n){n=n||1e-6;for(var r=0;16>r;r++)if(Math.abs(t[r]-e[r])>n)return!1;return!0},set:function(t,e){for(var n=0;16>n;n++)t[n]=e[n];return t},lookAt:function(t,e,n){var r=GIZA.Vector3;n=r.normalized(n);var i=r.normalize(r.subtract(t,e)),a=r.normalize(r.cross(i,n)),o=r.normalize(r.cross(a,i)),s=this.transpose(this.makeBasis(a,o,i));return s=this.translate(s,r.negated(t))},frustum:function(t,e,n,r,i,a){var o=2*i/(e-t),s=2*i/(r-n),u=(e+t)/(e-t),c=(r+n)/(r-n),l=-(a+i)/(a-i),f=-2*a*i/(a-i);return this.transpose(this.make(o,0,u,0,0,s,c,0,0,0,l,f,0,0,-1,0))},orthographic:function(t,e,n,r,i,a){var o=e-t,s=n-r,u=a-i,c=(e+t)/o,l=(n+r)/s,f=(a+i)/u;return this.transpose(this.make(2/o,0,0,-c,0,2/s,0,-l,0,0,-2/u,-f,0,0,0,1))},perspective:function(t,e,n,r){var i=n*Math.tan(t*Math.PI/360),a=-i,o=a*e,s=i*e;return this.frustum(o,s,a,i,n,r)},translation:function(t,e,n){return this.translated(this.identity(),t,e,n)},translate:function(t,e,n,r){var i=e;return"undefined"!=typeof n&&(i=[e,n,r]),t[12]=t[0]*i[0]+t[4]*i[1]+t[8]*i[2]+t[12],t[13]=t[1]*i[0]+t[5]*i[1]+t[9]*i[2]+t[13],t[14]=t[2]*i[0]+t[6]*i[1]+t[10]*i[2]+t[14],t[15]=t[3]*i[0]+t[7]*i[1]+t[11]*i[2]+t[15],t},translated:function(t,e,n,r){var i=this.copy(t);return this.translate(i,e,n,r)},row:function(t,e){return GIZA.Vector4.make(t[e],t[e+4],t[e+8],t[e+12])},column:function(t,e){return GIZA.Vector4.make(t[4*e],t[4*e+1],t[4*e+2],t[4*e+3])},multiply:function(t,e){if(4==e.length)return GIZA.Vector4.make(t[0]*e[0]+t[4]*e[1]+t[8]*e[2]+t[12]*e[3],t[1]*e[0]+t[5]*e[1]+t[9]*e[2]+t[13]*e[3],t[2]*e[0]+t[6]*e[1]+t[10]*e[2]+t[14]*e[3],t[3]*e[0]+t[7]*e[1]+t[11]*e[2]+t[15]*e[3]);if(16==e.length){var n=this.row(t,0),r=this.row(t,1),i=this.row(t,2),a=this.row(t,3),o=this.column(e,0),s=this.column(e,1),u=this.column(e,2),c=this.column(e,3),l=GIZA.Vector4,t=GIZA.Matrix4.make(l.dot(n,o),l.dot(n,s),l.dot(n,u),l.dot(n,c),l.dot(r,o),l.dot(r,s),l.dot(r,u),l.dot(r,c),l.dot(i,o),l.dot(i,s),l.dot(i,u),l.dot(i,c),l.dot(a,o),l.dot(a,s),l.dot(a,u),l.dot(a,c));return this.transposed(t)}throw new Error("I can only multiply a M4 with a V4 or a M4")},rotationX:function(t){var e=Math.cos(t),n=Math.sin(t);return this.make(1,0,0,0,0,e,-n,0,0,n,e,0,0,0,0,1)},rotationY:function(t){var e=Math.cos(t),n=Math.sin(t);return this.make(e,0,n,0,0,1,0,0,-n,0,e,0,0,0,0,1)},rotationZ:function(t){var e=Math.cos(t),n=Math.sin(t);return this.make(e,-n,0,0,n,e,0,0,0,0,1,0,0,0,0,1)},rotateX:function(t,e){var n=t[4],r=t[5],i=t[6],a=t[7],o=t[8],s=t[9],u=t[10],c=t[11],l=Math.cos(e),f=Math.sin(e);return t[4]=l*n+f*o,t[5]=l*r+f*s,t[6]=l*i+f*u,t[7]=l*a+f*c,t[8]=l*o-f*n,t[9]=l*s-f*r,t[10]=l*u-f*i,t[11]=l*c-f*a,t},rotateY:function(t,e){var n=t,r=n[0],i=n[1],a=n[2],o=n[3],s=n[8],u=n[9],c=n[10],l=n[11],f=Math.cos(e),h=Math.sin(e);return n[0]=f*r-h*s,n[1]=f*i-h*u,n[2]=f*a-h*c,n[3]=f*o-h*l,n[8]=f*s+h*r,n[9]=f*u+h*i,n[10]=f*c+h*a,n[11]=f*l+h*o,n},rotateZ:function(t,e){var n=t[0],r=t[1],i=t[2],a=t[3],o=t[4],s=t[5],u=t[6],c=t[7],l=Math.cos(e),f=Math.sin(e);return t[0]=l*n+f*o,t[1]=l*r+f*s,t[2]=l*i+f*u,t[3]=l*a+f*c,t[4]=l*o-f*n,t[5]=l*s-f*r,t[6]=l*u-f*i,t[7]=l*c-f*a,t},rotateAxis:function(t,e,n){var r=e[0],i=e[1],a=e[2],o=Math.sqrt(r*r+i*i+a*a);r/=o,i/=o,a/=o;var s=r*r,u=i*i,c=a*a,l=Math.cos(n),f=Math.sin(n),h=1-l,d=r*i*h,m=r*a*h,g=i*a*h,v=r*f,A=i*f,I=a*f,G=s+(1-s)*l,p=d+I,Z=m-A,w=d-I,k=u+(1-u)*l,y=g+v,S=m+A,b=g-v,M=c+(1-c)*l,x=t[0],T=t[1],q=t[2],z=t[3],E=t[4],C=t[5],P=t[6],R=t[7],F=t[8],L=t[9],V=t[10],O=t[11];return t[0]=G*x+p*E+Z*F,t[1]=G*T+p*C+Z*L,t[2]=G*q+p*P+Z*V,t[3]=G*z+p*R+Z*O,t[4]=w*x+k*E+y*F,t[5]=w*T+k*C+y*L,t[6]=w*q+k*P+y*V,t[7]=w*z+k*R+y*O,t[8]=S*x+b*E+M*F,t[9]=S*T+b*C+M*L,t[10]=S*q+b*P+M*V,t[11]=S*z+b*R+M*O,t},scale:function(t){var e,n,r;return 3==t.length?(e=t[0],n=t[1],r=t[2]):e=n=r=t,this.make(e,0,0,0,0,n,0,0,0,0,r,0,0,0,0,1)},scaled:function(t,e,n,r){var i=this.copy(t);return this.scale(i,e,n,r)},transpose:function(t){var e=this.transposed(t);return this.set(t,e),t},transposed:function(t){return this.make(t[0],t[4],t[8],t[12],t[1],t[5],t[9],t[13],t[2],t[6],t[10],t[14],t[3],t[7],t[11],t[15])},rotatedX:function(t,e){var n=this.copy(t);return this.rotateX(n,e)},rotatedY:function(t,e){var n=this.copy(t);return this.rotateY(n,e)},rotatedZ:function(t,e){var n=this.copy(t);return this.rotateZ(n,e)},stringify:function(t){return t[0]+" "+t[1]+" "+t[2]+" "+t[3]+"\n"+t[4]+" "+t[5]+" "+t[6]+" "+t[7]+"\n"+t[8]+" "+t[9]+" "+t[10]+" "+t[11]+"\n"+t[12]+" "+t[13]+" "+t[14]+" "+t[15]+"\n"}},GIZA.Matrix3={make:function(){if(0==arguments.length)return self.identity();if(3==arguments.length){var t=arguments;return this.make(t[0][0],t[0][1],t[0][2],t[1][0],t[1][1],t[1][2],t[2][0],t[2][1],t[2][2])}if(9==arguments.length)return Array.prototype.slice.call(arguments);if(1==arguments.length){var t=arguments[0];if(9==t.length)return t.slice(0);if(3==t.length)return this.make(t[0][0],t[0][1],t[0][2],t[1][0],t[1][1],t[1][2],t[2][0],t[2][1],t[2][2])}else console.error("GIZA.Matrix3 has wrong number of arguments")},makeBasis:function(t,e,n){return this.make(t[0],t[1],t[2],e[0],e[1],e[2],n[0],n[1],n[2])},copy:function(t){return this.make(t)},identity:function(){return this.make(1,0,0,0,1,0,0,0,1)},equivalent:function(t,e,n){n=n||1e-6;for(var r=0;9>r;r++)if(Math.abs(t[r]-e[r])>n)return!1;return!0},set:function(t,e){for(var n=0;9>n;n++)t[n]=e[n];return t},row:function(t,e){return GIZA.Vector3.make(t[e],t[e+3],t[e+6])},column:function(t,e){return GIZA.Vector3.make(t[3*e],t[3*e+1],t[3*e+2])},multiply:function(t,e){if(3==e.length)return GIZA.Vector3.make(t[0]*e[0]+t[3]*e[1]+t[6]*e[2],t[1]*e[0]+t[4]*e[1]+t[7]*e[2],t[2]*e[0]+t[5]*e[1]+t[8]*e[2]);if(9==e.length){var n=this.row(t,0),r=this.row(t,1),i=this.row(t,2),a=this.column(e,0),o=this.column(e,1),s=this.column(e,2),u=GIZA.Vector3,t=GIZA.Matrix3.make(u.dot(n,a),u.dot(n,o),u.dot(n,s),u.dot(r,a),u.dot(r,o),u.dot(r,s),u.dot(i,a),u.dot(i,o),u.dot(i,s));return this.transposed(t)}throw new Error("I can only multiply a M3 with a V3 or a M3")},rotationX:function(t){var e=Math.cos(t),n=Math.sin(t);return this.make(1,0,0,0,e,-n,0,n,e)},rotationY:function(t){var e=Math.cos(t),n=Math.sin(t);return this.make(e,0,n,0,1,0,-n,0,e)},rotationZ:function(t){var e=Math.cos(t),n=Math.sin(t);return this.make(e,-n,0,n,e,0,0,0,1)},rotateAxis:function(t,e,n){var r=e[0],i=e[1],a=e[2],o=Math.sqrt(r*r+i*i+a*a);r/=o,i/=o,a/=o;var s=r*r,u=i*i,c=a*a,l=Math.cos(n),f=Math.sin(n),h=1-l,d=r*i*h,m=r*a*h,g=i*a*h,v=r*f,A=i*f,I=a*f,G=s+(1-s)*l,p=d+I,Z=m-A,w=d-I,k=u+(1-u)*l,y=g+v,S=m+A,b=g-v,M=c+(1-c)*l,x=t[0],T=t[1],q=t[2],z=t[3],E=t[4],C=t[5],P=t[6],R=t[7],F=t[8];return t[0]=G*x+p*z+Z*P,t[1]=G*T+p*E+Z*R,t[2]=G*q+p*C+Z*F,t[3]=w*x+k*z+y*P,t[4]=w*T+k*E+y*R,t[5]=w*q+k*C+y*F,t[6]=S*x+b*z+M*P,t[7]=S*T+b*E+M*R,t[8]=S*q+b*C+M*F,t},scale:function(t){var e,n,r;return 3==t.length?(e=t[0],n=t[1],r=t[2]):e=n=r=t,this.make(e,0,0,0,n,0,0,0,r)},transpose:function(t){var e=this.transposed(t);return this.set(t,e),t},transposed:function(t){return this.make(t[0],t[3],t[6],t[1],t[4],t[7],t[2],t[5],t[8])},stringify:function(t){return t[0]+" "+t[1]+" "+t[2]+"\n"+t[3]+" "+t[4]+" "+t[5]+"\n"+t[6]+" "+t[7]+" "+t[8]+"\n"}};var GIZA=GIZA||{};GIZA.Color3={make:function(t,e,n){return[t,e,n]},equivalent:function(t,e,n){return n=n||1e-6,GIZA.Vector3.distanceSquared(t,e)<n},copy:function(t){return this.make(t[0],t[1],t[2])},set:function(t,e,n){return n=n||1,t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t},hsvToRgb:function(t,e,n){if(0>=e)return this.make(n,n,n);t=6*t;var r=n*e,i=t%2,a=(1-Math.abs(i-1))*r,o=n-r,s=0,u=0,c=0;return 1>t?(s=r,u=a,c=0):2>t?(s=a,u=r,c=0):3>t?(s=0,u=r,c=a):4>t?(s=0,u=a,c=r):5>t?(s=a,u=0,c=r):(s=r,u=0,c=a),this.make(s+o,u+o,c+o)}},GIZA.Color4={make:function(t,e,n,r){return[t,e,n,r]},copy:function(t){return this.make(t[0],t[1],t[2],t[3])},set:function(t,e,n){return n=n||1,t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3],t},hsvToRgb:function(t,e,n){var r=GIZA.Color3.hsvToRgb(t,e,n);return r.push(1),r}};var GIZA=GIZA||{};GIZA.Topo={NONE:0,FACET:1,SMOOTH:2,quadsToTriangles:function(t,e){var n=GIZA.Vector3,r={destIndexType:t.constructor,destPointsType:Float32Array,pointsArray:null,dereference:!1,normals:GIZA.Topo.NONE};e=GIZA.merge(r,e||{});for(var i=new e.destIndexType(6*t.length/4),a=0,o=0;o<t.length;){var s=t[o++],u=t[o++],c=t[o++],l=t[o++];i[a++]=c,i[a++]=u,i[a++]=s,i[a++]=s,i[a++]=l,i[a++]=c}var f=function(t){var r=e.pointsArray[3*t+0],i=e.pointsArray[3*t+1],a=e.pointsArray[3*t+2];return n.make(r,i,a)};if(e.dereference){if(!e.pointsArray)return console.error("GIZA.Topo: Dereferencing was requested, but pointsArray was not specified."),void 0;for(var h=new e.destPointsType(3*i.length),d=0,a=0;a<i.length;a++){var m=i[a];h[d++]=e.pointsArray[3*m+0],h[d++]=e.pointsArray[3*m+1],h[d++]=e.pointsArray[3*m+2]}var g=null;if(e.normals==GIZA.Topo.FACET){g=new Float32Array(h.length);for(var a=0,o=0;o<t.length;)for(var s=t[o++],u=t[o++],c=t[o++],l=t[o++],v=f(s),A=f(u),I=f(c),G=n.direction(v,A),p=n.direction(v,I),Z=n.cross(G,p),w=0;6>w;w++)g[a++]=Z[0],g[a++]=Z[1],g[a++]=Z[2]}}if(e.normals==GIZA.Topo.SMOOTH){for(var k=[],p=0;p<e.pointsArray.length/3;p++)k.push([]);for(var y=[],o=0;o<t.length;){var s=t[o++],u=t[o++],c=t[o++],l=t[o++];k[s].push(o/4-1),k[u].push(o/4-1),k[c].push(o/4-1),k[l].push(o/4-1);var v=f(s),A=f(u),I=f(c),G=n.direction(v,A),p=n.direction(v,I),Z=n.cross(G,p);y.push(Z)}g=new Float32Array(e.pointsArray.length);for(var a=0,p=0;p<e.pointsArray.length/3;p++){for(var Z=n.make(0,0,0),m=0;m<k[p].length;m++)Z=n.add(Z,y[k[p][m]]);n.normalize(Z),g[a++]=Z[0],g[a++]=Z[1],g[a++]=Z[2]}}return{indexArray:i,pointsArray:h,normalsArray:g}},quadsToLines:function(t,e){e=e||t.constructor,edgeList={};for(var n=function(t,e){var n=("0000"+t.toString(16)).slice(-4),r=("0000"+e.toString(16)).slice(-4);e>t?edgeList[n+r]=[t,e]:edgeList[r+n]=[e,t]},r=0;r<t.length;){var i=t[r++],a=t[r++],o=t[r++],s=t[r++];n(i,a),n(a,o),n(o,s),n(s,i)}for(var u=Object.keys(edgeList).sort(),c=new e(2*u.length),l=0,f=0;l<u.length;){var h=edgeList[u[l++]];c[f++]=h[0],c[f++]=h[1]}return c},trianglesToLines:function(t,e){e=e||t.constructor,edgeList={};for(var n=function(t,e){var n=("0000"+t.toString(16)).slice(-4),r=("0000"+e.toString(16)).slice(-4);e>t?edgeList[n+r]=[t,e]:edgeList[r+n]=[e,t]},r=0;r<t.length;){var i=t[r++],a=t[r++],o=t[r++];n(i,a),n(a,o),n(o,i)}for(var s=Object.keys(edgeList).sort(),u=new e(2*s.length),c=0,l=0;c<s.length;){var f=edgeList[s[c++]];u[l++]=f[0],u[l++]=f[1]}return u}};var __indexOf=[].indexOf||function(t){for(var e=0,n=this.length;n>e;e++)if(e in this&&this[e]===t)return e;return-1};GIZA.tessellate=function(t,e){var n,r,i,a,o,s,u,c,l,f,h,d,m,g,v,A,I,G,p,Z,w,k,y,S,b,M,x,T,q,z,E,C,P,R,F,L,V,O,B,D,N,_,H,W,U,Y,X,j,K,J,Q,$=GIZA.Vector2;if(m=function(t,e,n){var r=$.subtract(n,t),i=$.subtract(e,t),a=0>$.cross(r,i);return a},h=function(t,e,n){var r;return t[1]===e[1]?t[0]:t[1]<e[1]?(r=(n-t[1])/(e[1]-t[1]),t[0]+r*(e[0]-t[0])):(r=(n-e[1])/(t[1]-e[1]),e[0]+r*(t[0]-e[0]))},t.length<3)return[];if(3===t.length&&0===e.length)return[0,1,2];if(b=[],k=function(){Q=[];for(var e=0,n=t.length;n>=0?n>e:e>n;n>=0?e++:e--)Q.push(e);return Q}.apply(this),M=0,s=function(e){var n,r,i,a,o,s,u,c,l,f,d,m,g,v,A,I,G,p,Z,w,y,S,M,x,T,q,z,E,C,P,R;for(a=0,M=-1e4,A=x=0,z=e.length;z>x;A=++x)m=e[A],m[0]>M&&(M=m[0],a=A);for(i=e[a],n=1e-4,r=$.make(1e4,i[1]),o=$.make(),s=-1,I=T=0,E=t.length;E>T;I=++T)f=t[I],G=(I+1)%t.length,d=t[G],f[0]<i[0]&&d[0]<i[0]||f[0]>r[0]&&d[0]>r[0]||(f[1]<=(P=i[1])&&P<=d[1]||d[1]<=(R=i[1])&&R<=f[1])&&(S=h(f,d,i[1]),S<r[0]&&(r[0]=S,f[0]>d[0]?(o=f,s=I):(o=d,s=G)));for(y=[i,r,o],l=1e3,c=-1,p=q=0,C=k.length;C>q;p=++q)if(A=k[p],b[p]&&(u=t[A],$.withinTriangle(u,y[0],y[1],y[2]))){if(v=Math.abs(u[1]-o[1]),g=Math.abs(u[0]-o[0]),0===g)continue;w=v/g,l>w&&(l=w,c=A)}return-1!==c&&(s=c),Z=[s,a]},o=function(t){var e,n;return n=(t+k.length-1)%k.length,e=(t+1)%k.length,[n,e]},n=function(e){var n,r,i,a,s,u,c,l,f,h,d,m;if(0===M)return!0;for(m=o(e),c=m[0],u=m[1],l=[c,e,u],a=function(){var t,e,n;for(n=[],t=0,e=l.length;e>t;t++)s=l[t],n.push(k[s]);return n}(),f=function(){var e,r,i;for(i=[],e=0,r=a.length;r>e;e++)n=a[e],i.push(t[n]);return i}(),r=!0,s=h=0,d=k.length;d>h;s=++h)if(i=k[s],!(__indexOf.call(a,i)>=0)&&b[s]&&$.withinTriangle(t[i],f[0],f[1],f[2])){r=!1;break}return r},g=function(e){var n,r,i,a,s,u;return u=o(e),s=u[0],a=u[1],n=t[k[s]],r=t[k[e]],i=t[k[a]],m(n,r,i)},x=[],e.length&&e[0].length>=3){for(p=P=0,L=k.length;L>P;p=++P)v=k[p],b.push(g(p));for(c=e[0],x=s(c),t=t.slice(0),l=t.length,R=0,V=c.length;V>R;R++)u=c[R],t.push(u);for(I=[],f=(x[0]+1)%k.length,C=F=0,X=k.length;X>=0?X>F:F>X;C=X>=0?++F:--F)I.push(k[f]),f=(f+1)%k.length;for(f=x[1],C=_=0,j=c.length;j>=0?j>_:_>j;C=j>=0?++_:--_)I.push(l+f),f=(f+1)%c.length;I.push(I[k.length]),I.push(I[k.length-1]),k=I}for(r=[],b=[],M=0,p=H=0,O=k.length;O>H;p=++H)v=k[p],g(p)?(b.push(!0),M+=1):(b.push(!1),r.push(p));for(a=[],W=0,B=r.length;B>W;W++)p=r[W],n(p)&&a.push(p);for(q=!1,q&&(console.info(""),console.info("ears    "+a),console.info("reflex  "+b),console.info("convex  "+r)),T=[];k.length>0;){for(Z=a.pop(),E-=1,K=o(Z),y=K[0],w=K[1],S=[y,Z,w],G=function(){var t,e,n;for(n=[],e=0,t=S.length;t>e;e++)p=S[e],n.push(k[p]);return n}(),T.push(G),k.splice(Z,1),b.splice(Z,1),f=U=0,D=a.length;D>U;f=++U)p=a[f],p>Z&&(a[f]=a[f]-1);for(w>Z&&(w-=1),y>Z&&(y-=1),J=[y,w],Y=0,N=J.length;N>Y;Y++)A=J[Y],b[A]&&!g(A)&&(b[A]=!1,M-=1),b[A]||(d=n(A),i=a.indexOf(A),z=-1!==i,d&&!z?a.push(A):!d&&z&&a.splice(i,1))}return T};var GIZA=GIZA||{};GIZA.equations={},GIZA.equations.sphere=function(t){return function(e,n){return e=Math.PI*e,n=2*Math.PI*n,GIZA.Vector3.make(t*Math.sin(e)*Math.cos(n),t*Math.cos(e),t*-Math.sin(e)*Math.sin(n))}},GIZA.equations.plane=function(t){return function(e,n){var r=-t/2+t*e,i=-t/2+t*n;return GIZA.Vector3.make(r,i,0)}},GIZA.equations.sinc=function(t,e,n){var r=GIZA.equations.plane(e);return function(i,a){var o=r(i,a),s=o[0]*t/e,u=o[1]*t/e,c=Math.sqrt(s*s+u*u);return o[2]=n*Math.sin(c)/c,o}},GIZA.equations.torus=function(t,e){return function(n,r){return n=2*Math.PI*n,r=2*Math.PI*r,GIZA.Vector3.make((e+t*Math.cos(r))*Math.cos(n),(e+t*Math.cos(r))*Math.sin(n),t*Math.sin(r))}},GIZA.equations.tube=function(t,e){var n=GIZA.Vector3,r=GIZA.Vector4,i=GIZA.Matrix4;return function(a,o){var s=t(a),u=t(a+.01),c=n.normalize(n.subtract(s,u)),l=n.perp(c),f=n.normalize(n.cross(c,l)),h=i.makeBasis(f,l,c),d=r.make(Math.cos(4*Math.PI*o),Math.sin(4*Math.PI*o),0,0);return d=i.multiply(h,d),d=r.scale(d,e),n.add(d,s)}},GIZA.equations.grannyKnot=function(t){t=2*Math.PI*t;var e=Math.cos,n=Math.sin,r=-.22*e(t)-1.28*n(t)-.44*e(3*t)-.78*n(3*t),i=-.1*e(2*t)-.27*n(2*t)+.38*e(4*t)+.46*n(4*t),a=.7*e(3*t)-.4*n(3*t);return GIZA.Vector3.make(r,i,a)},GIZA.surfaceFlags={POSITIONS:1,COLORS:2,NORMALS:4,WRAP_COLS:8,WRAP_ROWS:16},GIZA.surface=function(t,e,n,r){var i=GIZA.Vector3,a=GIZA.Vector2;if(null==r){var o=GIZA.surfaceFlags;r=o.POSITIONS|o.WRAP_COLS|o.WRAP_ROWS}var s=r&GIZA.surfaceFlags.WRAP_COLS,u=r&GIZA.surfaceFlags.WRAP_ROWS,c=r&GIZA.surfaceFlags.COLORS,l=r&GIZA.surfaceFlags.NORMALS,f=(e+1)*(n+1),h=2*e*n,d=s?n:n+1,m=u?e:e+1,g=d*e+m*n,v=3;return l&&(v+=3),c&&v++,{pointCount:function(){return f},lineCount:function(){return g},triangleCount:function(){return h},points:function(){f>65535&&console.error("Too many points for 16-bit indices");var r={};r.position=[Float32Array,3],l&&(r.normal=[Float32Array,3]),c&&(r.color=[Uint8Array,4]);for(var a=new GIZA.BufferView(r),o=a.makeBuffer(f),s=a.iterator("position"),u=a.iterator("normal"),h=1/n,d=1/e,m=0,g=0;e+1>g;g++){for(var v=0,A=0;n+1>A;A++){var I=t(v,m);if(i.set(s.next(),I),l){var G=i.subtract(t(v+h,m),I),p=i.subtract(t(v,m+d),I),Z=i.normalize(i.cross(p,G));i.set(u.next(),Z)}v=A==n?1:v+h}m=g==e?1:m+d}return o},lines:function(t){t=t||Uint16Array;for(var r=new GIZA.BufferView({line:[t,2]}),i=r.makeBuffer(g),o=r.iterator("line"),s=n+1,u=0;m>u;u++)for(var c=0;n>c;c++){var l=u*s+c;a.set(o.next(),[l,l+1])}for(var u=0;e>u;u++)for(var c=0;d>c;c++){var l=u*s+c;a.set(o.next(),[l,l+s])}return i},triangles:function(t){t=t||Uint16Array;for(var r=new GIZA.BufferView({triangle:[t,3]}),a=r.makeBuffer(h),o=r.iterator("triangle"),s=n+1,u=0;e>u;u++)for(var c=0;n>c;c++){var l=u*s+c,f=l+s,d=l+1,m=l,g=l+s+1;i.set(o.next(),[f,d,m]),i.set(o.next(),[g,d,f])}return a}}};var GIZA=GIZA||{};GIZA.Path={Turtle:function(t,e){var n=[[t,e]];return{getNearest:function(t,e){for(var r=GIZA.Vector2,i=e||40,a=-1,o=0;o<n.length;o++){var s=r.distanceSquared(n[o],t);i>s&&(a=o,i=s)}return a},coords:function(){return n},lineTo:function(t,e){n.push([t,e])},bezierCurveTo:function(t,e,r,i,a,o){n.push([a,o])},closePath:function(){n.push(n[0])},mirror:function(){for(var t=0;t<n.length;t++)n[t]=[n[t][1],n[t][0]]},translate:function(t,e){for(var r=0;r<n.length;r++)n[r][0]+=t,n[r][1]+=e},scale:function(t,e){for(var r=0;r<n.length;r++)n[r][0]*=t,n[r][1]*=e},write:function(t,e){e=e||0;for(var r=0;r<n.length;r++)t[e++]=n[r][0],t[e++]=n[r][1];return e}}},Circle:function(t,e,n){return this instanceof GIZA.Path.Circle?(this.center=t,this.radius=e,this.normal=n,this.tessellate=function(n){for(var r=new Float32Array(3*n),i=0,a=2*Math.PI/n,o=0;n>o;o++)r[3*o+0]=t[0]+e*Math.cos(i),r[3*o+1]=t[1]+e*Math.sin(i),r[3*o+2]=0,i+=a;return r},void 0):new GIZA.Path.Circle(t,e,n)}};var GIZA=GIZA||{};GIZA.mouseinit=function(){var t=GIZA,e=GIZA.canvas;t.mouse={position:null,modifiers:{},handlers:[]};var n=function(n){var r=e.getBoundingClientRect(),i=n.clientX-r.left,a=n.clientY-r.top;t.mouse.modifiers.alt=n.altKey,t.mouse.modifiers.shift=n.shiftKey,t.mouse.modifiers.alt=n.altKey,t.mouse.position=[i,a];var o=n.type;"mousedown"==o?t.mouse.modifiers.button=!0:"mouseup"==o&&(t.mouse.modifiers.button=!1);for(var s=0;s<t.mouse.handlers.length;s++){var u=t.mouse.handlers[s];u(o,t.mouse.position,t.mouse.modifiers)}};e.addEventListener("mousedown",n),e.addEventListener("mouseup",n),e.addEventListener("mousemove",n),e.addEventListener("mouseenter",n),e.addEventListener("mouseout",function(){t.mouse.position=null})},GIZA.mousedown=function(t){GIZA.mouse.handlers.push(function(e,n,r){"mousedown"==e&&t(n,r)})},GIZA.mouseup=function(t){GIZA.mouse.handlers.push(function(e,n,r){"mouseup"==e&&t(n,r)})},GIZA.mousemove=function(t){GIZA.mouse.handlers.push(function(e,n,r){"mousemove"==e&&t(n,r)})};var GIZA=GIZA||{};GIZA.Turntable=function(t){var e=GIZA.Matrix3;GIZA.Vector3;var n=GIZA.Vector2;if(!(this instanceof GIZA.Turntable))return new GIZA.Turntable(t);var r={startSpin:.001,allowTilt:!0,allowSpin:!0,spinFriction:.125,epsilon:3,radiansPerPixel:n.make(.01,.01),canvas:GIZA.canvas,trackpad:!0,lockAxes:!1,homeTilt:.25};this.config=t=GIZA.merge(r,t||{});var i={Resting:0,SpinningStart:1,SpinningInertia:2,DraggingInit:3,DraggingSpin:4,DraggingTilt:5,ReturningHome:6},a=n.make(0,0),o=n.make(0,0),s=o.slice(0),u=o.slice(0),c=0,l=t.homeTilt,f=t.startSpin?i.SpinningStart:i.Resting,h=null,d=0,m=.125,g=this;GIZA.mousedown(function(t){g.startDrag(t)}),GIZA.mouseup(function(t){g.endDrag(t)}),GIZA.mousemove(function(t,e){e.button&&g.updateDrag(t)}),GIZA.drawHooks.push(function(e){null==h&&(h=e);var r=e-h;h=e;var a=f==i.DraggingSpin||f==i.DraggingInit&&!t.lockAxes;f==i.SpinningStart?c+=t.startSpin*r:f==i.SpinningInertia?(c+=d*r,d*=1-t.spinFriction,Math.abs(d)<1e-4&&(f=i.Resting)):t.trackpad&&a&&n.equivalent(o,u,0)&&(c+=d*r,d*=1-t.spinFriction),u=s.slice(0),s=o.slice(0)}),this.startDrag=function(t){a=t.slice(0),o=t.slice(0),f=i.DraggingInit
},this.updateDrag=function(e){var r=n.subtract(e,a);if(f==i.DraggingInit&&t.lockAxes)if(Math.abs(r[0])>t.epsilon&&t.allowSpin)f=i.DraggingSpin;else{if(!(Math.abs(r[1])>t.epsilon&&t.allowTilt))return;f=i.DraggingTilt}var s=this.getAngles()[0];o=e.slice(0);var u=this.getAngles()[0]-s;d=m*u},this.getAngles=function(){var e=n.subtract(o,a),r=c,s=l;if(f==i.DraggingSpin){var u=t.radiansPerPixel[0]*e[0];r+=u}else if(f==i.DraggingTilt){var u=t.radiansPerPixel[1]*e[1];s+=u}else t.lockAxes||f!=i.DraggingInit||(r+=t.radiansPerPixel[0]*e[0],s+=t.radiansPerPixel[1]*e[1]);return[r,s]},this.getRotation=function(){var t=this.getAngles(),n=e.rotationY(t[0]),r=e.rotationX(t[1]);return e.multiply(r,n)},this.endDrag=function(e){var n=this.getAngles()[0];o=e.slice(0);var r=this.getAngles();c=r[0],l=r[1];var a=c-n;1==t.spinFriction?f=i.Resting:(f=i.SpinningInertia,d=m*a)}},GIZA.Turntable.INFINITE=1e3,vendors=[null,"webkit","apple","moz","o","xv","ms","khtml","atsc","wap","prince","ah","hp","ro","rim","tc"],vendorName=function(t,e){return null===e?t:e+t[0].toUpperCase()+t.substr(1)},getVendorAttrib=function(t,e,n){var r,i,a,o,s;if(t)for(o=0,s=vendors.length;s>o;o++)if(a=vendors[o],i=vendorName(e,a),r=t[i],void 0!==r)return r;return n},document.fullscreenEnabled=getVendorAttrib(document,"fullscreenEnabled"),document.cancelFullscreen=getVendorAttrib(document,"cancelFullScreen"),GIZA.requestFullscreen=function(t){null==t&&(t=this.canvas),t.mozRequestFullScreen?t.mozRequestFullScreen():t.webkitRequestFullScreen?t.webkitRequestFullScreen():t.oRequestFullScreen&&t.oRequestFullScreen()},GIZA.isFullscreen=function(){var t,e;return t=getVendorAttrib(document,"fullscreenElement"),e=getVendorAttrib(document,"fullScreenElement"),t||e},GIZA.onFullscreenChange=function(t){var e,n,r,i,a=this;for(e=function(){return t(a.isFullscreen())},r=0,i=vendors.length;i>r;r++)n=vendors[r],document.addEventListener(n+"fullscreenchange",e,!1)},GIZA.exitFullscreen=function(){document.cancelFullscreen()},GIZA.toggleFullscreen=function(t){return t=t||this.canvas,this.isFullscreen()?this.exitFullscreen():this.requestFullscreen(t)};